"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7060],{2697:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"developers/Development-Environment/nvd-api-key-setup","title":"nvd-api-key-setup","description":"\x3c!--","source":"@site/docs/developers/03-Development-Environment/nvd-api-key-setup.md","sourceDirName":"developers/03-Development-Environment","slug":"/developers/Development-Environment/nvd-api-key-setup","permalink":"/docusaurus/pr-preview/pr-2167/docs/developers/Development-Environment/nvd-api-key-setup","draft":false,"unlisted":false,"editUrl":"https://github.com/sequentech/step/edit/main/docs/docusaurus/docs/developers/03-Development-Environment/nvd-api-key-setup.md","tags":[],"version":"current","frontMatter":{},"sidebar":"docs","previous":{"title":"Cli Reference Admin Cli Manual","permalink":"/docusaurus/pr-preview/pr-2167/docs/developers/CLI/Reference/Admin-CLI-Manual/cli_reference_admin_cli_manual"},"next":{"title":"Developing the Admin Portal","permalink":"/docusaurus/pr-preview/pr-2167/docs/developers/Admin-Portal/developers_admin_portal"}}');var s=i(4848),t=i(8453);const o={},d="NVD API Key Setup for Security Audits",l={},c=[{value:"Get an API Key",id:"get-an-api-key",level:2},{value:"Setup (Choose ONE method)",id:"setup-choose-one-method",level:2},{value:"Method 1: Environment Variable (Recommended)",id:"method-1-environment-variable-recommended",level:3},{value:"Method 2: Secret File",id:"method-2-secret-file",level:3},{value:"Method 3: Direct File (Alternative)",id:"method-3-direct-file-alternative",level:3},{value:"Using Devcontainers",id:"using-devcontainers",level:2},{value:"How Devcontainers Work with NVD API Key",id:"how-devcontainers-work-with-nvd-api-key",level:3},{value:"Rebuilding the Devcontainer",id:"rebuilding-the-devcontainer",level:3},{value:"Troubleshooting Devcontainers",id:"troubleshooting-devcontainers",level:3},{value:"Verify Setup",id:"verify-setup",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Security Note",id:"security-note",level:2},{value:"Usage",id:"usage",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"nvd-api-key-setup-for-security-audits",children:"NVD API Key Setup for Security Audits"})}),"\n",(0,s.jsxs)(n.p,{children:["The OWASP dependency-check Maven plugin uses the National Vulnerability Database (NVD) API to check for vulnerabilities. Without an API key, the update process can take ",(0,s.jsx)(n.strong,{children:"hours"}),". With an API key, it completes in ",(0,s.jsx)(n.strong,{children:"minutes"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"get-an-api-key",children:"Get an API Key"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to ",(0,s.jsx)(n.a,{href:"https://nvd.nist.gov/developers/request-an-api-key",children:"https://nvd.nist.gov/developers/request-an-api-key"})]}),"\n",(0,s.jsx)(n.li,{children:"Fill out the form with your email"}),"\n",(0,s.jsx)(n.li,{children:"Check your email for the API key (usually arrives within minutes)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"setup-choose-one-method",children:"Setup (Choose ONE method)"}),"\n",(0,s.jsx)(n.h3,{id:"method-1-environment-variable-recommended",children:"Method 1: Environment Variable (Recommended)"}),"\n",(0,s.jsxs)(n.p,{children:["Add to your shell configuration file on your ",(0,s.jsx)(n.strong,{children:"host machine"})," (not in the container):"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Linux/Mac"})," - Add to ",(0,s.jsx)(n.code,{children:"~/.bashrc"})," or ",(0,s.jsx)(n.code,{children:"~/.zshrc"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'export NVD_API_KEY="your-api-key-here"\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Windows"})," - Add to your user environment variables:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:'Search for "Environment Variables" in Windows'}),"\n",(0,s.jsx)(n.li,{children:'Click "New" under User variables'}),"\n",(0,s.jsxs)(n.li,{children:["Variable name: ",(0,s.jsx)(n.code,{children:"NVD_API_KEY"})]}),"\n",(0,s.jsxs)(n.li,{children:["Variable value: ",(0,s.jsx)(n.code,{children:"your-api-key-here"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Then ",(0,s.jsx)(n.strong,{children:"rebuild your devcontainer"})," or restart VS Code."]}),"\n",(0,s.jsx)(n.h3,{id:"method-2-secret-file",children:"Method 2: Secret File"}),"\n",(0,s.jsxs)(n.p,{children:["Create a file on your ",(0,s.jsx)(n.strong,{children:"host machine"}),":"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Linux/Mac"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'mkdir -p ~/.secrets\necho "your-api-key-here" > ~/.secrets/nvd-api-key\nchmod 600 ~/.secrets/nvd-api-key\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Windows"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-powershell",children:'New-Item -ItemType Directory -Force -Path $env:USERPROFILE\\.secrets\nSet-Content -Path $env:USERPROFILE\\.secrets\\nvd-api-key -Value "your-api-key-here"\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Then ",(0,s.jsx)(n.strong,{children:"rebuild your devcontainer"})," or restart VS Code."]}),"\n",(0,s.jsx)(n.h3,{id:"method-3-direct-file-alternative",children:"Method 3: Direct File (Alternative)"}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"~/.nvd-api-key"})," on your ",(0,s.jsx)(n.strong,{children:"host machine"}),":"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Linux/Mac"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'echo "your-api-key-here" > ~/.nvd-api-key\nchmod 600 ~/.nvd-api-key\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Windows"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-powershell",children:'Set-Content -Path $env:USERPROFILE\\.nvd-api-key -Value "your-api-key-here"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"using-devcontainers",children:"Using Devcontainers"}),"\n",(0,s.jsxs)(n.p,{children:["This project uses ",(0,s.jsx)(n.a,{href:"https://code.visualstudio.com/docs/devcontainers/containers",children:"Visual Studio Code Dev Containers"})," to provide a consistent development environment. The devcontainer configuration automatically handles the NVD API key setup for you."]}),"\n",(0,s.jsx)(n.h3,{id:"how-devcontainers-work-with-nvd-api-key",children:"How Devcontainers Work with NVD API Key"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:".devcontainer/devcontainer.json"})," configuration includes settings that:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mount your home directory"})," - This gives the container access to your API key files"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Pass environment variables"})," - If you set ",(0,s.jsx)(n.code,{children:"NVD_API_KEY"})," on your host, it's automatically available in the container"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Preserve permissions"})," - File-based API keys maintain their security settings"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"rebuilding-the-devcontainer",children:"Rebuilding the Devcontainer"}),"\n",(0,s.jsx)(n.p,{children:"After setting up your NVD API key, you need to rebuild the devcontainer for changes to take effect:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Open the Command Palette in VS Code (",(0,s.jsx)(n.code,{children:"Ctrl+Shift+P"})," or ",(0,s.jsx)(n.code,{children:"Cmd+Shift+P"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:["Search for and select: ",(0,s.jsx)(n.strong,{children:"Dev Containers: Rebuild Container"})]}),"\n",(0,s.jsx)(n.li,{children:"Wait for the container to rebuild and reopen"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Alternatively, you can:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Close and reopen VS Code"}),"\n",(0,s.jsxs)(n.li,{children:["Use the command: ",(0,s.jsx)(n.strong,{children:"Dev Containers: Reopen in Container"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"troubleshooting-devcontainers",children:"Troubleshooting Devcontainers"}),"\n",(0,s.jsx)(n.p,{children:"If your API key isn't available in the devcontainer:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Verify on host machine"})," - Check that the key exists outside the container"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Check mounts"})," - Ensure your home directory is mounted (see ",(0,s.jsx)(n.code,{children:".devcontainer/devcontainer.json"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rebuild completely"})," - Try ",(0,s.jsx)(n.strong,{children:"Dev Containers: Rebuild Container Without Cache"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Check environment"})," - Inside the container, run ",(0,s.jsx)(n.code,{children:"echo $NVD_API_KEY"})," or ",(0,s.jsx)(n.code,{children:"cat ~/.nvd-api-key"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"verify-setup",children:"Verify Setup"}),"\n",(0,s.jsx)(n.p,{children:"After setting up the API key and rebuilding your devcontainer, verify it's working:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"echo $NVD_API_KEY\n# Should output your API key if using environment variable method\n\n# Or check for the file\ncat ~/.nvd-api-key\n# or\ncat ~/.secrets/nvd-api-key\n"})}),"\n",(0,s.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,s.jsxs)(n.p,{children:["The security audit script (",(0,s.jsx)(n.code,{children:"scripts/tasks/security/audit-dependencies.sh"}),") automatically detects your API key from these sources (in order):"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"$NVD_API_KEY"})," environment variable"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"~/.nvd-api-key"})," file"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"~/.secrets/nvd-api-key"})," file"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"The devcontainer configuration mounts your home directory, so these files/variables are automatically available inside the container."}),"\n",(0,s.jsx)(n.h2,{id:"security-note",children:"Security Note"}),"\n",(0,s.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.strong,{children:"NEVER commit your API key to the repository!"})]}),"\n",(0,s.jsx)(n.p,{children:"The methods above keep your key on your local machine only. The key is:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Not added to any git-tracked files"}),"\n",(0,s.jsx)(n.li,{children:"Only available in your personal devcontainer"}),"\n",(0,s.jsx)(n.li,{children:"Automatically available when you rebuild/restart"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.p,{children:"Once configured, the security audit will automatically use your API key:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"./scripts/tasks/security/audit-dependencies.sh\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Or run the VS Code task: ",(0,s.jsx)(n.code,{children:"security.audit.dependencies"})]}),"\n",(0,s.jsx)(n.p,{children:"You should see:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u2615 Auditing: keycloak-extensions\n  Using NVD API key for faster updates...\n"})}),"\n",(0,s.jsx)(n.p,{children:"Instead of:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u26a0 No NVD API key found - this will be SLOW\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>d});var r=i(6540);const s={},t=r.createContext(s);function o(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);