"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[771],{8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var i=n(6540);const l={},s=i.createContext(l);function r(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),i.createElement(s.Provider,{value:t},e.children)}},9666:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"developers/Velvet/velvet_algorithms","title":"Counting Algorithms","description":"\x3c!--","source":"@site/docs/developers/07-Velvet/04-algorithms.md","sourceDirName":"developers/07-Velvet","slug":"/developers/Velvet/velvet_algorithms","permalink":"/docusaurus/pr-preview/pr-2068/docs/developers/Velvet/velvet_algorithms","draft":false,"unlisted":false,"editUrl":"https://github.com/sequentech/step/docs/docusaurus/docs/developers/07-Velvet/04-algorithms.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"velvet_algorithms","title":"Counting Algorithms","sidebar_position":4},"sidebar":"docs","previous":{"title":"Tally Engine","permalink":"/docusaurus/pr-preview/pr-2068/docs/developers/Velvet/velvet_tally"},"next":{"title":"Instant Runoff Algorithm","permalink":"/docusaurus/pr-preview/pr-2068/docs/developers/Velvet/velvet_instant_runoff"}}');var l=n(4848),s=n(8453);const r={id:"velvet_algorithms",title:"Counting Algorithms",sidebar_position:4},o="Counting Algorithms",a={},d=[{value:"Overview",id:"overview",level:2},{value:"Available Algorithms",id:"available-algorithms",level:2},{value:"Plurality at Large",id:"plurality-at-large",level:3},{value:"Instant Runoff Voting (IRV)",id:"instant-runoff-voting-irv",level:3},{value:"Common Utilities",id:"common-utilities",level:2},{value:"Adding New Algorithms",id:"adding-new-algorithms",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"counting-algorithms",children:"Counting Algorithms"})}),"\n",(0,l.jsx)(t.p,{children:"Velvet supports multiple counting algorithms to accommodate different electoral systems."}),"\n",(0,l.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(t.p,{children:["Each counting algorithm implements the ",(0,l.jsx)(t.code,{children:"CountingAlgorithm"})," trait, which defines:"]}),"\n",(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-rust",children:"pub trait CountingAlgorithm {\n    fn tally(&self) -> Result<ContestResult>;\n}\n"})}),"\n",(0,l.jsx)(t.p,{children:"This trait-based design allows Velvet to support any electoral system by implementing the appropriate counting logic."}),"\n",(0,l.jsx)(t.h2,{id:"available-algorithms",children:"Available Algorithms"}),"\n",(0,l.jsx)(t.h3,{id:"plurality-at-large",children:"Plurality at Large"}),"\n",(0,l.jsx)(t.p,{children:"Simple majority voting where candidates with the most votes win. Commonly used for multi-seat elections where voters can select multiple candidates."}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Location"}),": ",(0,l.jsx)(t.code,{children:"/packages/velvet/src/pipes/do_tally/counting_algorithm/plurality_at_large.rs"})]}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.em,{children:"Documentation to be added."})}),"\n",(0,l.jsx)(t.h3,{id:"instant-runoff-voting-irv",children:"Instant Runoff Voting (IRV)"}),"\n",(0,l.jsx)(t.p,{children:"Ranked-choice voting system where voters rank candidates in order of preference. If no candidate has a majority, the candidate with the fewest votes is eliminated and their votes are redistributed until a winner emerges."}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Location"}),": ",(0,l.jsx)(t.code,{children:"/packages/velvet/src/pipes/do_tally/counting_algorithm/instant_runoff.rs"})]}),"\n",(0,l.jsxs)(t.p,{children:["See: ",(0,l.jsx)(t.a,{href:"/docusaurus/pr-preview/pr-2068/docs/developers/Velvet/velvet_instant_runoff",children:"Instant Runoff Algorithm Documentation"})]}),"\n",(0,l.jsx)(t.h2,{id:"common-utilities",children:"Common Utilities"}),"\n",(0,l.jsx)(t.p,{children:"All algorithms share common utilities for:"}),"\n",(0,l.jsxs)(t.ul,{children:["\n",(0,l.jsx)(t.li,{children:"Ballot validation"}),"\n",(0,l.jsx)(t.li,{children:"Vote counting"}),"\n",(0,l.jsx)(t.li,{children:"Metric calculation"}),"\n",(0,l.jsx)(t.li,{children:"Result formatting"}),"\n"]}),"\n",(0,l.jsxs)(t.p,{children:[(0,l.jsx)(t.strong,{children:"Location"}),": ",(0,l.jsx)(t.code,{children:"/packages/velvet/src/pipes/do_tally/counting_algorithm/common.rs"})]}),"\n",(0,l.jsx)(t.h2,{id:"adding-new-algorithms",children:"Adding New Algorithms"}),"\n",(0,l.jsx)(t.p,{children:"To add a new counting algorithm:"}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsxs)(t.li,{children:["Create a new file in ",(0,l.jsx)(t.code,{children:"/packages/velvet/src/pipes/do_tally/counting_algorithm/"})]}),"\n",(0,l.jsxs)(t.li,{children:["Implement the ",(0,l.jsx)(t.code,{children:"CountingAlgorithm"})," trait"]}),"\n",(0,l.jsxs)(t.li,{children:["Add the algorithm to ",(0,l.jsx)(t.code,{children:"mod.rs"})]}),"\n",(0,l.jsx)(t.li,{children:"Configure the algorithm in the election configuration"}),"\n"]}),"\n",(0,l.jsx)(t.p,{children:"The trait-based design ensures your algorithm will integrate seamlessly with the rest of Velvet."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}}}]);