"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6002],{4100:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"developers/Velvet/velvet_pipes","title":"Pipes","description":"\x3c!--","source":"@site/docs/developers/07-Velvet/02-pipes.md","sourceDirName":"developers/07-Velvet","slug":"/developers/Velvet/velvet_pipes","permalink":"/docusaurus/pr-preview/pr-2068/docs/developers/Velvet/velvet_pipes","draft":false,"unlisted":false,"editUrl":"https://github.com/sequentech/step/edit/main/docs/docusaurus/docs/developers/07-Velvet/02-pipes.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"velvet_pipes","title":"Pipes","sidebar_position":2},"sidebar":"docs","previous":{"title":"Velvet Introduction","permalink":"/docusaurus/pr-preview/pr-2068/docs/developers/Velvet/velvet_introduction"},"next":{"title":"Tally Engine","permalink":"/docusaurus/pr-preview/pr-2068/docs/developers/Velvet/velvet_tally"}}');var s=i(4848),r=i(8453);const l={id:"velvet_pipes",title:"Pipes",sidebar_position:2},o="Pipes",d={},c=[{value:"Overview",id:"overview",level:2},{value:"Available Pipes",id:"available-pipes",level:2},{value:"decode_ballots",id:"decode_ballots",level:3},{value:"do_tally",id:"do_tally",level:3},{value:"generate_db",id:"generate_db",level:3},{value:"generate_reports",id:"generate_reports",level:3},{value:"mark_winners",id:"mark_winners",level:3},{value:"vote_receipts",id:"vote_receipts",level:3},{value:"Pipe Configuration",id:"pipe-configuration",level:2},{value:"Implementation",id:"implementation",level:2}];function a(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"pipes",children:"Pipes"})}),"\n",(0,s.jsx)(n.p,{children:"Pipes are the fundamental processing units in Velvet. Each pipe performs a specific transformation or operation on election data."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Pipes are designed to be composable and chainable, allowing complex workflows to be built from simple, focused components. Each pipe:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Takes input from a specified directory"}),"\n",(0,s.jsx)(n.li,{children:"Performs a specific operation"}),"\n",(0,s.jsx)(n.li,{children:"Writes output to a designated directory"}),"\n",(0,s.jsx)(n.li,{children:"Logs its execution"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"available-pipes",children:"Available Pipes"}),"\n",(0,s.jsx)(n.h3,{id:"decode_ballots",children:"decode_ballots"}),"\n",(0,s.jsx)(n.p,{children:"Decodes encrypted ballots into plaintext votes that can be tallied."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"/packages/velvet/src/pipes/decode_ballots/"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Documentation to be added."})}),"\n",(0,s.jsx)(n.h3,{id:"do_tally",children:"do_tally"}),"\n",(0,s.jsx)(n.p,{children:"Executes the counting algorithm on decoded ballots to produce tally results."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"/packages/velvet/src/pipes/do_tally/"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Documentation to be added."})}),"\n",(0,s.jsx)(n.h3,{id:"generate_db",children:"generate_db"}),"\n",(0,s.jsx)(n.p,{children:"Creates a SQLite database containing the tally results for efficient querying and reporting."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"/packages/velvet/src/pipes/generate_db/"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Documentation to be added."})}),"\n",(0,s.jsx)(n.h3,{id:"generate_reports",children:"generate_reports"}),"\n",(0,s.jsx)(n.p,{children:"Produces PDF and CSV reports containing election results in human-readable formats."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"/packages/velvet/src/pipes/generate_reports/"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Documentation to be added."})}),"\n",(0,s.jsx)(n.h3,{id:"mark_winners",children:"mark_winners"}),"\n",(0,s.jsx)(n.p,{children:"Analyzes tally results to determine which candidates have won according to the electoral rules."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"/packages/velvet/src/pipes/mark_winners/"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Documentation to be added."})}),"\n",(0,s.jsx)(n.h3,{id:"vote_receipts",children:"vote_receipts"}),"\n",(0,s.jsx)(n.p,{children:"Generates individual vote receipts that voters can use to verify their votes were counted."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Location"}),": ",(0,s.jsx)(n.code,{children:"/packages/velvet/src/pipes/vote_receipts/"})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.em,{children:"Documentation to be added."})}),"\n",(0,s.jsx)(n.h2,{id:"pipe-configuration",children:"Pipe Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Pipes are configured through the Velvet configuration file, which defines:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"The execution order of pipes"}),"\n",(0,s.jsx)(n.li,{children:"Pipe-specific configuration options"}),"\n",(0,s.jsx)(n.li,{children:"Input and output directories"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Example configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "version": "0.0.0",\n  "stages": {\n    "order": ["main"],\n    "main": {\n      "pipeline": [\n        {\n          "id": "decode-ballots",\n          "pipe": "VelvetDecodeBallots",\n          "config": {}\n        },\n        {\n          "id": "do-tally",\n          "pipe": "VelvetDoTally",\n          "config": {\n            "invalidateVotes": "Fail"\n          }\n        }\n      ]\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"implementation",children:"Implementation"}),"\n",(0,s.jsxs)(n.p,{children:["Each pipe implements the ",(0,s.jsx)(n.code,{children:"Pipe"})," trait, which defines:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"exec()"})," - Main execution method"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"input()"})," - Load and validate input data"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"output()"})," - Write results to output directory"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This trait-based design ensures consistency across all pipes and makes it easy to add new pipes to the system."})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>o});var t=i(6540);const s={},r=t.createContext(s);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);