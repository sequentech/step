"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4803],{4819:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"developers/Updates/updating-rust-version","title":"updating-rust-version","description":"\x3c!--","source":"@site/docs/developers/11-Updates/updating-rust-version.md","sourceDirName":"developers/11-Updates","slug":"/developers/Updates/updating-rust-version","permalink":"/docusaurus/pr-preview/pr-2154/docs/developers/Updates/updating-rust-version","draft":false,"unlisted":false,"editUrl":"https://github.com/sequentech/step/docs/docusaurus/docs/developers/11-Updates/updating-rust-version.md","tags":[],"version":"current","frontMatter":{"sidebar_label":"Updating Rust Version"},"sidebar":"docs","previous":{"title":"Generating Dependency Report","permalink":"/docusaurus/pr-preview/pr-2154/docs/developers/Updates/generating-dependency-report"},"next":{"title":"Reference Overview","permalink":"/docusaurus/pr-preview/pr-2154/docs/reference/reference"}}');var r=s(4848),l=s(8453);const c={sidebar_label:"Updating Rust Version"},t="Updating Rust Version",d={},o=[{value:"Overview",id:"overview",level:2},{value:"Why Synchronization Matters",id:"why-synchronization-matters",level:2},{value:"Complete Update Checklist",id:"complete-update-checklist",level:2},{value:"1. GitHub Actions Workflows",id:"1-github-actions-workflows",level:3},{value:"2. Dockerfiles",id:"2-dockerfiles",level:3},{value:"3. Nix Configuration",id:"3-nix-configuration",level:3},{value:"Step-by-Step Update Process",id:"step-by-step-update-process",level:2},{value:"1. Update Nix First",id:"1-update-nix-first",level:3},{value:"Update devenv.nix",id:"update-devenvnix",level:4},{value:"Check the Actual Rust Version in Nix",id:"check-the-actual-rust-version-in-nix",level:4},{value:"2. Check Current Versions in Other Files",id:"2-check-current-versions-in-other-files",level:3},{value:"3. Decide on Target Version",id:"3-decide-on-target-version",level:3},{value:"4. Update All Other Files to Match Nix",id:"4-update-all-other-files-to-match-nix",level:3},{value:"5. Use Search and Replace",id:"5-use-search-and-replace",level:3},{value:"6. Test the Changes",id:"6-test-the-changes",level:3},{value:"Local Testing",id:"local-testing",level:4},{value:"CI Testing",id:"ci-testing",level:4},{value:"Docker Testing",id:"docker-testing",level:4},{value:"7. Verify Consistency",id:"7-verify-consistency",level:3},{value:"Reference: Complete File List",id:"reference-complete-file-list",level:2},{value:"GitHub Actions (3 files)",id:"github-actions-3-files",level:3},{value:"Nix Configuration (1 file)",id:"nix-configuration-1-file",level:3},{value:"Dockerfiles (18 files)",id:"dockerfiles-18-files",level:3},{value:"Best Practices",id:"best-practices",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"updating-rust-version",children:"Updating Rust Version"})}),"\n",(0,r.jsx)(n.p,{children:"This guide explains how to update the Rust version across the entire Step Repository. It's critical that all locations are updated together to ensure consistency across development environments, CI/CD pipelines, and production builds."}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.p,{children:["The Step Repository uses ",(0,r.jsx)(n.strong,{children:"Rust stable version 1.90.0"})," throughout the entire codebase. We maintain a single, consistent version across:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"GitHub Actions (CI/CD pipelines)"}),"\n",(0,r.jsx)(n.li,{children:"All Dockerfiles (development and production)"}),"\n",(0,r.jsx)(n.li,{children:"Nix development environment (devenv.nix)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"why-synchronization-matters",children:"Why Synchronization Matters"}),"\n",(0,r.jsx)(n.p,{children:"Rust versions must be synchronized across all systems to ensure:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reproducible builds"})," - Same code compiles identically everywhere"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Consistent behavior"})," - No surprises from compiler version differences"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Dependency compatibility"})," - All dependencies work with the chosen version"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"CI/CD reliability"})," - Tests and builds don't fail due to version mismatches"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Developer experience"})," - Local development matches production"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"complete-update-checklist",children:"Complete Update Checklist"}),"\n",(0,r.jsx)(n.p,{children:"When updating the Rust version, you MUST update it in all of the following locations:"}),"\n",(0,r.jsx)(n.h3,{id:"1-github-actions-workflows",children:"1. GitHub Actions Workflows"}),"\n",(0,r.jsxs)(n.p,{children:["Update the ",(0,r.jsx)(n.code,{children:"toolchain"})," version in these workflow files:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:".github/workflows/tests.yml"})})," (line 43)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"- name: Install Rust\n  uses: dtolnay/rust-toolchain@stable\n  with:\n    profile: minimal\n    toolchain: 1.90.0  # \u2190 Update this\n    components: rustfmt\n    target: x86_64-unknown-linux-musl\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:".github/workflows/lint_prettify.yml"})})," (line 102)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"- name: Install Rust\n  uses: dtolnay/rust-toolchain@stable\n  with:\n    profile: minimal\n    toolchain: 1.90.0  # \u2190 Update this\n    components: rustfmt\n    target: x86_64-unknown-linux-musl\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:".github/workflows/step_cli_build.yml"})})," (line 38)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"- name: Install Rust\n  uses: dtolnay/rust-toolchain@stable\n  with:\n    profile: minimal\n    toolchain: 1.90.0  # \u2190 Update this\n    components: rustfmt\n    target: x86_64-unknown-linux-musl\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-dockerfiles",children:"2. Dockerfiles"}),"\n",(0,r.jsxs)(n.p,{children:["Update the ",(0,r.jsx)(n.code,{children:"FROM rust:X.Y.Z"})," line in ",(0,r.jsx)(n.strong,{children:"all"})," Dockerfiles:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/Dockerfile.cargo-packages"})})," (line 10)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"FROM rust:1.90.0-slim-bookworm  # \u2190 Update this\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/braid/Dockerfile"})})," (line 5)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"FROM rust:1.90.0-slim-bookworm  # \u2190 Update this\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/braid/Dockerfile.prod"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/braid/Dockerfile.prod-vstl-dependencies"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/windmill/Dockerfile"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/windmill/Dockerfile.prod"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/windmill/Dockerfile.prod-vstl-dependencies"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/harvest/Dockerfile"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/harvest/Dockerfile.prod"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/harvest/Dockerfile.prod-vstl-dependencies"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/b3/Dockerfile.prod"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/b3/Dockerfile.prod-vstl-dependencies"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/e2e/src/mock_server/Dockerfile.prod"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/loadtesting/Dockerfile"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/Dockerfile.immudb-init-vstl-dependencies"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/Dockerfile.immudb-init.prod"})})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"packages/step-cli/Dockerfile"})})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": Remove any ",(0,r.jsx)(n.code,{children:"rustup toolchain install nightly-*"})," commands if present. We only use stable Rust."]}),"\n",(0,r.jsx)(n.h3,{id:"3-nix-configuration",children:"3. Nix Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Update the Rust channel in the Nix development environment:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"devenv.nix"})})," (line 98)","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nix",children:'languages.rust = {\n  enable = true;\n  # https://devenv.sh/reference/options/#languagesrustchannel\n  channel = "stable";  # \u2190 Should be "stable"\n  toolchain.rust-src = pkgs.rustPlatform.rustLibSrc;\n};\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"}),": Nix uses channel names (",(0,r.jsx)(n.code,{children:"stable"}),", ",(0,r.jsx)(n.code,{children:"beta"}),", ",(0,r.jsx)(n.code,{children:"nightly"}),") rather than specific versions. The actual version is determined by the nixpkgs snapshot. To pin a specific Rust version in Nix, you would need to override the ",(0,r.jsx)(n.code,{children:"rustc"})," package."]}),"\n",(0,r.jsx)(n.h2,{id:"step-by-step-update-process",children:"Step-by-Step Update Process"}),"\n",(0,r.jsx)(n.h3,{id:"1-update-nix-first",children:"1. Update Nix First"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Always start by updating the Nix environment first"}),", as this will determine the Rust version for local development. Since Nix uses channel names rather than specific versions, you need to check what version you're actually getting."]}),"\n",(0,r.jsx)(n.h4,{id:"update-devenvnix",children:"Update devenv.nix"}),"\n",(0,r.jsxs)(n.p,{children:["Ensure your ",(0,r.jsx)(n.code,{children:"devenv.nix"})," is using the stable channel:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nix",children:'languages.rust = {\n  enable = true;\n  channel = "stable";  # Make sure this is set to "stable"\n  toolchain.rust-src = pkgs.rustPlatform.rustLibSrc;\n};\n'})}),"\n",(0,r.jsx)(n.h4,{id:"check-the-actual-rust-version-in-nix",children:"Check the Actual Rust Version in Nix"}),"\n",(0,r.jsx)(n.p,{children:"After updating or verifying your Nix configuration, check the actual Rust version that Nix provides:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Enter the devenv shell\ndevenv shell\n\n# Check the actual Rust version\nrustc --version\n# Output example: rustc 1.90.0 (abc123def 2024-10-01)\n\n# Note the version number (e.g., 1.90.0)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["The version shown by ",(0,r.jsx)(n.code,{children:"rustc --version"})," inside ",(0,r.jsx)(n.code,{children:"devenv shell"})," is the version determined by your nixpkgs snapshot. ",(0,r.jsx)(n.strong,{children:"This is the version you should use for all other files"})," (GitHub Actions and Dockerfiles)."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important"}),": Simply checking ",(0,r.jsx)(n.code,{children:"devenv.nix"})," will only show ",(0,r.jsx)(n.code,{children:'channel = "stable"'}),", which doesn't tell you the specific version. You must run ",(0,r.jsx)(n.code,{children:"rustc --version"})," inside the devenv shell to see the actual version."]}),"\n",(0,r.jsx)(n.h3,{id:"2-check-current-versions-in-other-files",children:"2. Check Current Versions in Other Files"}),"\n",(0,r.jsx)(n.p,{children:"Now identify the Rust versions currently used in other parts of the codebase:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Search for Rust versions in Dockerfiles\ngrep -r "FROM rust:" packages/\n\n# Search for Rust versions in GitHub Actions\ngrep -r "toolchain:" .github/workflows/\n'})}),"\n",(0,r.jsx)(n.p,{children:"Compare these versions with what you found in Nix. They should all match."}),"\n",(0,r.jsx)(n.h3,{id:"3-decide-on-target-version",children:"3. Decide on Target Version"}),"\n",(0,r.jsx)(n.p,{children:"If you need to update to a newer Rust version:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Check the Nix version first"})," - Run ",(0,r.jsx)(n.code,{children:"devenv shell"})," then ",(0,r.jsx)(n.code,{children:"rustc --version"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Decide if you need to update Nix"})," - If you need a newer version, you may need to update your nixpkgs snapshot"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Review breaking changes"})," - Check ",(0,r.jsx)(n.a,{href:"https://www.rust-lang.org/",children:"https://www.rust-lang.org/"})," and release notes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ensure compatibility"})," - Verify existing dependencies work with the target version"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"The target version should be whatever Nix provides. If Nix is giving you an older version than you need, you'll need to update your nixpkgs or override the Rust package in Nix."}),"\n",(0,r.jsx)(n.h3,{id:"4-update-all-other-files-to-match-nix",children:"4. Update All Other Files to Match Nix"}),"\n",(0,r.jsx)(n.p,{children:"Update all files to use the same version that Nix is providing:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update GitHub Actions"})," - Set ",(0,r.jsx)(n.code,{children:"toolchain:"})," to the version from Nix"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update Dockerfiles"})," - Set ",(0,r.jsx)(n.code,{children:"FROM rust:X.Y.Z"})," to the version from Nix"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"This ensures consistency: your local development environment (Nix), CI/CD (GitHub Actions), and production builds (Dockerfiles) all use the same Rust version."}),"\n",(0,r.jsx)(n.h3,{id:"5-use-search-and-replace",children:"5. Use Search and Replace"}),"\n",(0,r.jsx)(n.p,{children:"To update all versions at once:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Update stable version in GitHub Actions\nfind .github/workflows/ -name \"*.yml\" -type f -exec sed -i 's/toolchain: 1.90.0/toolchain: X.Y.Z/g' {} +\n\n# Update stable version in Dockerfiles\nfind packages/ -name \"Dockerfile*\" -type f -exec sed -i 's/FROM rust:1.90.0/FROM rust:X.Y.Z/g' {} +\n\n# Remove any nightly references (if any exist)\nfind packages/ -name \"Dockerfile*\" -type f -exec sed -i '/rustup toolchain install nightly/d' {} +\nfind packages/ -name \"Dockerfile*\" -type f -exec sed -i '/rustup default nightly/d' {} +\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Warning"}),": Always review changes after automated replacements!"]}),"\n",(0,r.jsx)(n.h3,{id:"6-test-the-changes",children:"6. Test the Changes"}),"\n",(0,r.jsx)(n.p,{children:"After updating, test thoroughly:"}),"\n",(0,r.jsx)(n.h4,{id:"local-testing",children:"Local Testing"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Rebuild devenv to use new Rust version\ndevenv shell\n\n# Verify Rust version\nrustc --version\n# Should output: rustc X.Y.Z (expected version)\n\ncargo --version\n\n# Run tests locally\ncd packages/\ncargo test\ncargo fmt -- --check\n"})}),"\n",(0,r.jsx)(n.h4,{id:"ci-testing",children:"CI Testing"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Commit your changes to a feature branch"}),"\n",(0,r.jsx)(n.li,{children:"Open a pull request"}),"\n",(0,r.jsxs)(n.li,{children:["Wait for all CI checks to pass:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Tests workflow"}),"\n",(0,r.jsx)(n.li,{children:"Lint & Prettify workflow"}),"\n",(0,r.jsx)(n.li,{children:"Step CLI build workflow"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h4,{id:"docker-testing",children:"Docker Testing"}),"\n",(0,r.jsx)(n.p,{children:"Build a few key Docker images to verify:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Test building services\ncd packages/\ndocker build -f braid/Dockerfile -t test-braid .\ndocker build -f windmill/Dockerfile -t test-windmill .\ndocker build -f Dockerfile.cargo-packages -t test-cargo .\n"})}),"\n",(0,r.jsx)(n.h3,{id:"7-verify-consistency",children:"7. Verify Consistency"}),"\n",(0,r.jsx)(n.p,{children:"After all updates, verify everything is in sync:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Should show consistent versions across all files\ngrep -r "toolchain: 1\\." .github/workflows/\ngrep -r "FROM rust:1\\." packages/\n\n# Should return NO results (no nightly versions should exist)\ngrep -r "nightly" packages/ | grep -i rust\n'})}),"\n",(0,r.jsx)(n.h2,{id:"reference-complete-file-list",children:"Reference: Complete File List"}),"\n",(0,r.jsx)(n.p,{children:"Here's the complete list of files that need updating:"}),"\n",(0,r.jsx)(n.h3,{id:"github-actions-3-files",children:"GitHub Actions (3 files)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:".github/workflows/tests.yml"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:".github/workflows/lint_prettify.yml"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:".github/workflows/step_cli_build.yml"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"nix-configuration-1-file",children:"Nix Configuration (1 file)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"devenv.nix"})}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dockerfiles-18-files",children:"Dockerfiles (18 files)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/Dockerfile.cargo-packages"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/braid/Dockerfile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/braid/Dockerfile.prod"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/braid/Dockerfile.prod-vstl-dependencies"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/windmill/Dockerfile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/windmill/Dockerfile.prod"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/windmill/Dockerfile.prod-vstl-dependencies"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/harvest/Dockerfile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/harvest/Dockerfile.prod"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/harvest/Dockerfile.prod-vstl-dependencies"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/b3/Dockerfile.prod"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/b3/Dockerfile.prod-vstl-dependencies"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/e2e/src/mock_server/Dockerfile.prod"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/loadtesting/Dockerfile"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/Dockerfile.immudb-init-vstl-dependencies"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/Dockerfile.immudb-init.prod"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"packages/step-cli/Dockerfile"})}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update regularly"})," - Stay reasonably current with stable Rust releases"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Test thoroughly"})," - Don't skip the testing steps"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update together"})," - Never update just one location; always update all"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Document changes"})," - Note any code changes required for the new version"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Monitor CI"})," - Watch for failures in the automated pipeline"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Use stable only"})," - We don't use nightly features; stick to stable Rust"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>t});var i=s(6540);const r={},l=i.createContext(r);function c(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);