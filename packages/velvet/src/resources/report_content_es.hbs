{{!--
SPDX-FileCopyrightText: 2024 Sequent Tech <legal@sequentech.io>

  SPDX-License-Identifier: AGPL-3.0-only
  --}}

  <div class="content">
    <h1 class="title">Resultados de la Elección "{{ reports.0.election_name }}"</h1>
    <div id="dateDiv">
      {{ timestamp }}
    </div>

    {{ #each reports as |report| }}
    {{#if report.channel_type}}
    <h2>Canal: {{ sanitize_html report.channel_type }}</h2>
    {{/if}}
    <h2>Pregunta: {{ sanitize_html report.contest.name }}</h2>
    {{#if report.area}}
    <h2>Área: {{ report.area.name}}</h2>
    {{/if}}
    <p class="contest-desc">{{ sanitize_html report.contest.description }}</p>

    <table>
      <tr>
        <th colspan="2">Datos de Configuración</th>
      </tr>
      <tr>
        <td style="width: 55%;">Sistema de Escrutinio</td>
        <td style="width: 45%;">
          {{ report.contest.voting_type }},
          {{ report.contest.counting_algorithm }}
        </td>
      </tr>
      <tr>
        <td style="width: 55%;">Número mínimo de candidatos que un votante puede seleccionar</td>
        <td style="width: 45%;">{{ format_u64 report.contest.min_votes }}</td>
      </tr>
      <tr>
        <td style="width: 55%;">Número máximo de candidatos que un votante puede seleccionar</td>
        <td style="width: 45%;">{{ format_u64 report.contest.max_votes }}</td>
      </tr>
    </table>

    <table>
      <tr>
        <th colspan="3">Participación</th>
      </tr>
      <tr>
        <td style="width: 55%;">Resumen</td>
        <td style="width: 22.5%;">Total</td>
        <td style="width: 22.5%;">%</td>
      </tr>
      <tr>
        <td style="width: 55%;">Censo</td>
        <td style="width: 22.5%;">{{ format_u64 report.contest_result.census }}</td>
        <td style="width: 22.5%;">{{ format_percentage report.contest_result.percentage_census }}%</td>
      </tr>
      <tr>
        <td style="width: 55%;">Votos auditables</td>
        <td style="width: 22.5%;">{{ format_u64 report.contest_result.auditable_votes}}</td>
        <td style="width: 22.5%;">{{ format_percentage report.contest_result.percentage_auditable_votes }}%</td>
      </tr>
      <tr>
        <td style="width: 55%;">Número total de votos contados</td>
        <td style="width: 22.5%;">{{ format_u64 report.contest_result.total_votes }}</td>
        <td style="width: 22.5%;">{{ format_percentage report.contest_result.percentage_total_votes }}%</td>
      </tr>
      <tr>
        <td style="width: 55%;">Número total de votos válidos</td>
        <td style="width: 22.5%;">{{ format_u64 report.contest_result.total_valid_votes }}</td>
        <td style="width: 22.5%;">{{ format_percentage report.contest_result.percentage_total_valid_votes }}%</td>
      </tr>
      <tr>
        <td style="width: 55%;">Votos en blanco (total)</td>
        <td style="width: 22.5%;">{{ format_u64 report.contest_result.total_blank_votes }}</td>
        <td style="width: 22.5%;">{{ format_percentage report.contest_result.percentage_total_blank_votes }}%</td>
      </tr>
      <tr>
        <td style="width: 55%;">Votos explícitamente inválidos</td>
        <td style="width: 22.5%;">{{ format_u64 report.contest_result.invalid_votes.explicit }}</td>
        <td style="width: 22.5%;">{{ format_percentage report.contest_result.percentage_invalid_votes_explicit }}%</td>
      </tr>
      <tr>
        <td style="width: 55%;">Votos implícitamente inválidos</td>
        <td style="width: 22.5%;">{{ format_u64 report.contest_result.invalid_votes.implicit }}</td>
        <td style="width: 22.5%;">{{ format_percentage report.contest_result.percentage_invalid_votes_implicit }}%</td>
      </tr>
    </table>

    <table>
      <tr>
        <th colspan="4">Resultado de los Candidatos</th>
      </tr>
      <tr class="">
        <td style="width: 55%;">Nombre</td>
        <td style="width: 15%;">Votos</td>
        <td style="width: 15%;">Porcentaje de votos</td>
        <td style="width: 15%;">Posición Ganadora</td>
      </tr>
      {{#each report.candidate_result as |candidate|}}
      <tr class="">
        <td style="width: 55%;">{{{ candidate.candidate.name }}}</td>
        <td style="width: 15%;">{{ format_u64 candidate.total_count }}</td>
        <td style="width: 15%;">{{ format_percentage candidate.percentage_votes }}%</td>
        <td style="width: 15%;">{{ candidate.winning_position }}</td>
      </tr>
      {{/each}}
    </table>
    {{/each}}

  </div>