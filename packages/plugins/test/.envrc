# SPDX-FileCopyrightText: 2023-2024 Sequent Tech <legal@sequentech.io>
#
# SPDX-License-Identifier: AGPL-3.0-only
packages/extensions/test/.envrc

Inherit your devcontainerâ€™s env
source_up
source ../.devcontainer/.env

# Make sure `cargo` is on your PATH
export PATH="/workspaces/step/packages/step-cli/rust-local-target/release:$PATH"

# If we donâ€™t already have a watcher for *this* directory, start one
if ! pgrep -f "cargo watch.*--directory $PWD" >/dev/null; then
  echo "ðŸ“¦  direnv: starting cargo-watch in $(basename $PWD)"
  cargo watch -q -c \
  -w src \
  -x 'build --target wasm32-unknown-unknown'
fi