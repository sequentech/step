actions:
    - name: ApplicationChangeStatus
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/change-application-status
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.body}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: service-account
          - role: application-write
          - role: admin-user
      comment: Confirm voter application and correlate to a Voter
    - name: VerifyApplication
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/verify-application
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.body}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: application-write
          - role: service-account
          - role: admin-user
      comment: Verify User Registration Application
    - name: check_private_key
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/check-private-key
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value_from_env: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.object}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: trustee-ceremony
          - role: admin-user
      comment: check private key
    - name: count_users
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/count-users
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.body}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: voter-read
          - role: user-read
          - role: admin-user
    - name: createScheduledEvent
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/scheduled-event
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value_from_env: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
      comment: create scheduled event
    - name: create_ballot_receipt
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/create-ballot-receipt
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: user
      comment: create_ballot_receipt
    - name: create_election
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/create-election
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: permission-label-write
          - role: election-event-write
          - role: admin-user
    - name: create_keys_ceremony
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/create-keys-ceremony
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value_from_env: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.object}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
          - role: admin-ceremony
      comment: create keys ceremony
    - name: create_permission
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/create-permission
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.body}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: create_role
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/create-role
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: create_tally_ceremony
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/create-tally-ceremony
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
          - role: admin-ceremony
    - name: create_transmission_package
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/miru/create-transmission-package
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: miru-create
          - role: admin-user
    - name: create_user
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/create-user
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: voter-create
          - role: admin-user
    - name: delete_election_event
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/delete-election-event
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value_from_env: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: election-event-delete
          - role: admin-user
    - name: delete_permission
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/delete-permission
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: delete_role
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/delete-role
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: delete_role_permission
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/delete-role-permission
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: delete_user
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/delete-user
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: voter-delete
          - role: admin-user
    - name: delete_user_role
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/delete-user-role
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: delete_users
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/delete-users
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
      comment: delete users
    - name: edit_user
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/edit-user
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.body}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: voter-change-password
          - role: voter-manually-verify
          - role: voter-write
          - role: admin-user
    - name: encrypt_report
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/encrypt-report
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: |
                      {{$body.input}}
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
          - role: report-read
          - role: report-write
    - name: exportTrustees
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-trustees
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: trustees-export
    - name: export_application
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-application
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: application-export
    - name: export_ballot_publication
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-ballot-publication
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: |
                      {{$body.input}}
              template_engine: Kriti
              version: 2
      permissions:
          - role: publish-export
          - role: publish-write
    - name: export_election_event
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-election-event
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: election-event-read
    - name: export_election_event_logs
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-election-event-logs
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: logs-export
          - role: election-event-read
          - role: logs-read
    - name: export_election_event_tasks
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-election-event-tasks
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
    - name: export_tasks_execution
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-tasks-execution
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: tasks-read
    - name: export_template
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-template
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: |
                      {{$body.input}}
              template_engine: Kriti
              version: 2
      permissions:
          - role: communication-template-write
          - role: admin-user
    - name: export_tenant_config
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-tenant-config
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: tenant-read
          - role: admin-user
    - name: export_tenant_users
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-tenant-users
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: user-read
    - name: export_users
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/export-users
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: voter-export
          - role: admin-user
          - role: voter-read
          - role: user-read
    - name: fetchDocument
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/fetch-document
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value_from_env: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: |-
                      {
                          "election_event_id": {{$body.input.election_event_id}},
                          "document_id": {{$body.input.document_id}}
                      }
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
      comment: fetch document
    - name: generate_ballot_publication
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/generate-ballot-publication
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: publish-regenerate
          - role: publish-create
          - role: publish-write
          - role: admin-user
    - name: generate_report
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/generate-report
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: report-preview
          - role: report-generate
          - role: report-write
          - role: report-read
    - name: generate_template
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/generate-template
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: report-generate
          - role: report-read
    - name: generate_transmission_report
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/generate-transmission-report
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: transmission-report-generate
          - role: report-generate
          - role: report-preview
          - role: report-read
          - role: report-write
    - name: getElectionEventStats
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/election-event/stats
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.object}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-dashboard-view
          - role: admin-user
      comment: get election event stats
    - name: getElectionStats
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/election/stats
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.object}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-dashboard-view
          - role: admin-user
      comment: get election event stats
    - name: get_ballot_publication_changes
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/get-ballot-publication-changes
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: publish-changes
          - role: publish-read
          - role: admin-user
    - name: get_election_event_monitoring
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/election-event-monitoring
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: monitoring-dashboard-view-election-event
    - name: get_election_monitoring
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/election-monitoring
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: monitoring-dashboard-view-election
    - name: get_manual_verification_pdf
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/get-manual-verification-pdf
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.body}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: get_permissions
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/get-permissions
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.body}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
      comment: list permissions
    - name: get_private_key
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/get-private-key
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value_from_env: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.object}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: trustee-ceremony
          - role: admin-user
      comment: get private key
    - name: get_roles
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/get-roles
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.body}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: get_top_votes_by_ip
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/election-event/top-votes-by-ip
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.body}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: election-ip-address-view
          - role: admin-ip-address-view
          - role: admin-user
          - role: admin-dashboard-view
    - name: get_upload_url
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/get-upload-url
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: document-upload
          - role: admin-user
    - name: get_user
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/get-user
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: user-read
          - role: voter-read
          - role: admin-user
    - name: get_user_profile_attributes
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/get-user-profile-attributes
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: voter-read
          - role: user-read
          - role: admin-user
    - name: get_user_template
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/get-user-template
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: |
                      {{$body.input}}
              template_engine: Kriti
              version: 2
      permissions:
          - role: report-write
          - role: report-read
    - name: get_users
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/get-users
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.body}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: voter-read
          - role: user-read
          - role: admin-user
    - name: import_application
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/import-application
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: application-import
    - name: import_areas
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/import-areas
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: area-write
    - name: import_candidates
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/import-candidates
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: import_election_event
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/import-election-event
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: election-event-read
          - role: election-event-write
          - role: area-write
          - role: admin-user
      comment: import_election_event
    - name: import_templates
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/import-templates
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: |
                      {{$body.input}}
              template_engine: Kriti
              version: 2
      permissions:
          - role: communication-template-write
          - role: admin-user
    - name: import_tenant_config
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/import-tenant-config
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: tenant-write
          - role: admin-user
    - name: import_users
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/import-users
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: user-import
          - role: voter-import
          - role: admin-user
          - role: voter-create
          - role: user-create
    - name: insertElectionEvent
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/insert-election-event
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value_from_env: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.object}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: insertTenant
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/insert-tenant
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
      comment: insertTenant
    - name: insert_cast_vote
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/insert-cast-vote
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: user
      comment: insert_cast_vote
    - name: limit_access_by_countries
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/limit-access-by-countries
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: cloudflare-write
          - role: admin-user
    - name: listElectoralLog
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/immudb/electoral-log
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: |-
                      {
                        "tenant_id": {{ head(removeNulls([$session_variables?['x-hasura-tenant-id'],""])) }},
                        "election_event_id": {{ $body.input?.election_event_id }},
                        "limit": {{$body.input?.limit}},
                        "offset": {{$body.input?.offset}},
                        "filter": {{$body.input?.filter}},
                        "order_by": {{$body.input?.order_by}}
                      }
              template_engine: Kriti
              version: 2
      permissions:
          - role: immudb:log:read
          - role: admin-user
      comment: List Electoral Log
    - name: listPgaudit
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/immudb/pgaudit-list
          forward_client_headers: true
          headers:
              - name: X-Hasura-Admin-Secret
                value_from_env: ACTIONS_ADMIN_SECRET
          request_transform:
              body:
                  action: transform
                  template: |-
                      {
                        "tenant_id": {{ head(removeNulls([$session_variables?['x-hasura-tenant-id'],""])) }},
                        "election_event_id": {{ head(removeNulls([$session_variables?['x-hasura-election-event-id'],"defaultdb"])) }},
                        "limit": {{$body.input?.limit}},
                        "offset": {{$body.input?.offset}},
                        "filter": {{$body.input?.filter}},
                        "audit_table": {{$body.input?.audit_table}},
                        "order_by": {{$body.input?.order_by}}
                      }
              template_engine: Kriti
              version: 2
      permissions:
          - role: immudb:log:read
          - role: admin-user
      comment: List PostgreSQL audit logs
    - name: list_keys_ceremony
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/list-keys-ceremonies
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: trustee-ceremony
          - role: admin-ceremony
    - name: list_user_roles
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/list-user-roles
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: logEvent
      definition:
          kind: ""
          handler: http://{{HARVEST_DOMAIN}}/immudb/log-event
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: service-account
      comment: log an event in immudb
    - name: manage_election_dates
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/manage-election-dates
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: scheduled-event-write
          - role: election-event-write
          - role: admin-user
    - name: publish_ballot
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/publish-ballot
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: publish-write
          - role: admin-user
    - name: publish_tally_sheet
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/publish-tally-sheet
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: tally-sheet-publish
          - role: admin-user
      comment: publish_tally_sheet
    - name: render_document_pdf
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/render-document-pdf
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: report-read
    - name: restore_private_key
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/restore-private-key
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input.object}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: trustee-ceremony
          - role: admin-user
    - name: send_transmission_package
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/miru/send-transmission-package
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: miru-send
    - name: set_custom_urls
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/set-custom-url
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: election-event-write
          - role: admin-user
    - name: set_role_permission
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/set-role-permission
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: set_user_role
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/set-user-role
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: set_voter_authentication
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/set-voter-authentication
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: update_election_voting_status
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/update-election-voting-status
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: election-state-write
          - role: admin-user
    - name: update_event_voting_status
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/update-event-voting-status
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: publish-stop-voting
          - role: publish-pause-voting
          - role: publish-start-voting
          - role: admin-user
          - role: election-state-write
    - name: update_tally_ceremony
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/update-tally-ceremony
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: trustee-read
          - role: admin-user
    - name: upload_signature
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/miru/upload-signature
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: miru-sign
          - role: admin-user
    - name: upsert_area
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/upsert-area
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: admin-user
    - name: upsert_areas
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/upsert-areas
          forward_client_headers: true
          request_transform:
              body:
                  action: transform
                  template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
      permissions:
          - role: area-read
          - role: area-upsert
          - role: area-create
          - role: area-write
      comment: upsert_areas
    - name: upsert_tally_sheet
      definition:
          kind: synchronous
          handler: http://{{HARVEST_DOMAIN}}/upsert-tally-sheet
          forward_client_headers: true
          request_transform:
              body:
              action: transform
              template: "{{$body.input}}"
              template_engine: Kriti
              version: 2
          permissions:
              - role: tally-sheet-create
custom_types:
    enums:
        - name: ReportEncryptionPolicy
          values:
              - description: null
                is_deprecated: null
                value: unencrypted
              - description: null
                is_deprecated: null
                value: configured_password
        - name: OrderDirection
          values:
              - description: null
                is_deprecated: null
                value: asc
              - description: null
                is_deprecated: null
                value: desc
        - name: PgAuditTable
          values:
              - description: null
                is_deprecated: null
                value: pgaudit_hasura
              - description: null
                is_deprecated: null
                value: pgaudit_keycloak
        - name: VotingStatus
          values:
              - description: null
                is_deprecated: null
                value: NOT_STARTED
              - description: null
                is_deprecated: null
                value: OPEN
              - description: null
                is_deprecated: null
                value: PAUSED
              - description: null
                is_deprecated: null
                value: CLOSED
        - name: VotingStatusChannel
          values:
              - description: null
                is_deprecated: null
                value: ONLINE
              - description: null
                is_deprecated: null
                value: KIOSK
    input_objects:
        - name: TemplateInput
        - name: PgAuditFilter
        - name: PgAuditOrderBy
        - name: ElectoralLogFilter
        - name: ElectoralLogOrderBy
        - name: SampleInput
        - name: CreateElectionEventInput
        - name: GetUsersInput
        - name: CreateKeysCeremonyInput
        - name: ElectionEventStatsInput
        - name: ElectionStatsInput
        - name: GetPrivateKeyInput
        - name: CheckPrivateKeyInput
        - name: GetPermissionsInput
        - name: GetRolesInput
        - name: EditUsersInput
        - name: DeleteUserInput
        - name: KeycloakUser2
        - name: CreateUserInput
        - name: KeycloakPermission2
        - name: CreatePermissionInput
        - name: GetManualVerificationInput
        - name: KeycloakRole2
        - name: RestorePrivateKeyInput
        - name: UserProfileAttributesInput
        - name: EventListFilter
        - name: EventListOrderBy
        - name: GetTopCastVotesByIpInput
        - name: ExportOptions
        - name: ApplicationVerifyBody
        - name: ApplicationChangeStatusBody
        - name: ElectionStatsMonitoringInput
        - name: ImportOptions
        - name: CountUsersInput
    objects:
        - name: GetManualVerificationOutput
        - name: CreateKeysCeremonyOutput
        - name: GetPrivateKeyOutput
        - name: CastVotesPerDay
        - name: ElectionEventStatsOutput
        - name: ElectionStatsOutput
        - name: CheckPrivateKeyOutput
        - name: TemplateOutput
        - name: FetchDocumentOutput
        - name: ScheduledEventOutput
        - name: PgAuditRow
        - name: Aggregate
        - name: DataListPgAudit
        - name: TotalAggregate
        - name: ElectoralLogRow
        - name: DataListElectoralLog
        - name: ScheduledEventOutput2
        - name: ScheduledEventOutput3
        - name: SampleOutput
        - name: CreateElectionEventOutput
        - name: InsertTenantOutput
        - name: KeycloakUserArea
        - name: VotesInfo
        - name: KeycloakUser
        - name: GetUsersOutput
        - name: GetPermissionsOutput
        - name: KeycloakPermission
        - name: GetRolesOutput
        - name: KeycloakRole
        - name: GetUploadUrlOutput
        - name: DeleteUserOutput
        - name: CreateUserOutput
        - name: SetRolePermissionOutput
        - name: OptionalId
        - name: ExportUsersOutput
        - name: SetUserRoleOutput
        - name: CreateTallyOutput
        - name: StartTallyOutput
        - name: PublishBallotOutput
        - name: UpdateEventVotingStatusOutput
        - name: UpdateElectionVotingStatusOutput
        - name: BallotPublicationStyles
        - name: GetBallotPublicationChangesOutput
        - name: RestorePrivateKeyOutput
        - name: PublishTallyOutput
        - name: InsertCastVoteOutput
        - name: createBallotReceiptOutput
        - name: OptionalImportEvent
        - name: ManageElectionDatesOutput
        - name: ExportLogsOutput
        - name: ExportAllUsersOutput
        - name: ExportTenantUsersOutput
        - name: UserProfileAttributes
        - name: UserProfileAttribute
        - name: DeleteUsersOutput
        - name: ExportTasksOutput
        - name: ExportTaskOutput
        - name: sequent_backend_tasks_execution_ActionType
        - name: TaskOutput
        - name: tasks_execution_type
        - name: taskOutput
        - name: documentTaskOutput
        - name: LogEventOutput
        - name: SetCustomUrlOutput
        - name: SetCustomUrlsOutput
        - name: DeleteElectionEvent
        - name: ExportTasksExecutionOutput
        - name: createTransmissionPackageOutput
        - name: GetEventListOutput
        - name: EventListRow
        - name: DataEventList
        - name: EventOutput
        - name: CreateEventOutput
        - name: LimtIpByCountriesOutput
        - name: LimitAccessByCountriesOutput
        - name: ExportTemplateOutput
        - name: templateOutput
        - name: GetTopCastVotesByIpOutput
        - name: CastVotesByIp
        - name: CreateElectionOutput
        - name: ListKeysCeremonyOutput
        - name: KeysCeremony
        - name: generateReportOutput
        - name: ExportBallotPublicationOutput
        - name: EncryptReportOutput
        - name: GetUserTemplateOutput
        - name: ElectionStatsMonitoringOutput
        - name: MonitoringAuthentication
        - name: MonitoringApproval
        - name: MonitoringVotingSatus
        - name: MonitoringTransmissionStatus
        - name: ElectionEventStatsMonitoringOutput
        - name: ExportApplicationOutput
        - name: applicationOutput
        - name: ExportTrusteesOutput
        - name: SetVoterAuthenticationOutput
        - name: ImportTenantOutput
        - name: ExportElectionEventOutput
        - name: GenerateTemplateOutput
        - name: ApplicationChangeStatusOutput
        - name: CountUsersOutput
        - name: RenderDocumentPDFOutput
        - name: UpsertAreaOutput
    scalars: []
