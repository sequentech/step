// For format details, see https://aka.ms/vscode-remote/devcontainer.json or the definition README at
// https://github.com/microsoft/vscode-dev-containers/tree/master/containers/docker-existing-dockerfile
{
	"name": "bulletin-board with no setup scripts",
	"dockerComposeFile": "../docker-compose.yml",
	"service": "dev",
	"workspaceFolder": "/workspace",
	"forwardPorts": [3000],

	"userEnvProbe": "loginShell",
	"updateRemoteUserUID": false,

    "waitFor": "onCreateCommand",

    "customizations": {
        "codespaces": {
            "repositories": {
                "sequentech/strand": {
                    "permissions": {
                        "contents": "write"
                    }
                }
            }
        },
        "vscode": {
            "extensions": [
                // run commands on save
                // https://marketplace.visualstudio.com/items?itemName=fsevenm.run-it-on
                "fsevenm.run-it-on",

                // Docker for Visual Studio Code
                "ms-azuretools.vscode-docker",

                // select nix environment
                "arrterian.nix-env-selector",

                // Nix language support
                "jnoortheen.nix-ide",

                // Rust language support
                "rust-lang.rust-analyzer",

                // Markdown support and previsualization
                "yzhang.markdown-all-in-one",

                // Toml support
                "tamasfe.even-better-toml",

                // Debugging
                "vadimcn.vscode-lldb",

                // protobuf support
                "zxh404.vscode-proto3",

                // Go language support
                "golang.Go",

                // Allows to use Alt+Q (or Option+Q in mac) to rewrap lines
                "stkb.rewrap",

                // Very useful for managing git
                "eamodio.gitlens"
            ]
        }
    }
  }
  
