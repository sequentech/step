<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="{{file_qrcode_lib}}"></script>
    <style type="text/css">
      body {
        margin: 0;
        padding: 0;
        -webkit-text-size-adjust: 100%;
        -ms-text-size-adjust: 100%;
        background-color: #ffffff;
        font-family: serif;
        font-size: 14px;
      }
      table,
      td {
        border-collapse: collapse;
      }
      img {
        border: 0;
        height: auto;
        line-height: 100%;
        outline: none;
        text-decoration: none;
      }
      p,
      h1,
      h2,
      h3 {
        margin: 14px 0;
      }
      a {
        text-decoration: none;
        color: inherit;
      }
      #qrcode-container > div {
        margin: 16px 0;
      }
    </style>
  </head>
  <body style="background-color: #ffffff">
    {{rendered_user_template}}
  </body>
  <script>
    // Assume we have an array of URLs to encode
    const urlsToEncode = JSON.parse(`[
      {{#each qr_codes}}
        "{{this}}"{{#unless @last}},{{/unless}}
      {{/each}}
      ]`);

    function generateQRCodes(urls) {
      const qrcodeContainer = document.getElementById("qrcode-container");
      urls.forEach((url, index) => {
        const qrcodeElement = document.createElement("div");
        qrcodeElement.id = `qrcode-${index}`;
        qrcodeContainer.appendChild(qrcodeElement);

        new QRCode(qrcodeElement, {
          text: url,
          width: 80,
          height: 80,
          colorDark: "#000000",
          colorLight: "#ffffff",
          correctLevel: QRCode.CorrectLevel.M,
        });
      });
    }

    // Call the function to generate QR codes
    generateQRCodes(urlsToEncode);
  </script>
</html>
