# rabbitmq.conf
# Modern RabbitMQ clustering configuration
# Use the correct peer discovery mechanism for containerized environments

# Enable classic peer discovery
cluster_formation.peer_discovery_backend = classic_config

# Set the nodes to cluster with
cluster_formation.classic_config.nodes.1 = rabbit@rabbitmq1
cluster_formation.classic_config.nodes.2 = rabbit@rabbitmq2

# Automatically rejoin cluster on restart
cluster_formation.randomized_startup_delay_range.min = 0
cluster_formation.randomized_startup_delay_range.max = 2

# Set cluster name for better management
cluster_name = rabbitmq_cluster
